<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHOXA Business</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://api-maps.yandex.ru/2.1/?apikey=69c0a01b-1865-45db-9e1e-36102831b79f&lang=en_US"
    type="text/javascript"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css">
</head>

<body>
  <div id="app">
    <!-- Auth Pages -->
    <div id="auth-container" class="auth-container">
      <div id="login-page" class="auth-page">
        <div class="auth-card">
          <div class="auth-logo">
            <img src="logo.png" alt="SHOXA" class="logo-icon">
            <h1>SHOXA Business</h1>
            <p>Manage your presence on the map</p>
          </div>
          <form id="login-form" class="auth-form">
            <div class="form-group">
              <label for="login-email">Email</label>
              <input type="email" id="login-email" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
              <label for="login-password">Password</label>
              <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
            </div>
            <button type="submit" class="btn btn-primary btn-full">
              <span>Sign In</span>
              <i class="ri-arrow-right-line"></i>
            </button>
          </form>
          <p class="auth-switch">
            Don't have an account? <a href="#" id="show-register">Register your business</a>
          </p>
        </div>
      </div>

      <div id="register-page" class="auth-page hidden">
        <div class="auth-card">
          <div class="auth-logo">
            <img src="logo.png" alt="SHOXA" class="logo-icon">
            <h1>Join SHOXA</h1>
            <p>Get your business on the map</p>
          </div>
          <form id="register-form" class="auth-form">
            <div class="form-group">
              <label for="register-name">Your Name</label>
              <input type="text" id="register-name" placeholder="John Doe" required>
            </div>
            <div class="form-group">
              <label for="register-email">Email</label>
              <input type="email" id="register-email" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
              <label for="register-password">Password</label>
              <input type="password" id="register-password" placeholder="Min 6 characters" required>
            </div>
            <button type="submit" class="btn btn-primary btn-full">
              <span>Create Account</span>
              <i class="ri-arrow-right-line"></i>
            </button>
          </form>
          <p class="auth-switch">
            Already have an account? <a href="#" id="show-login">Sign In</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Setup Flow (after first registration) -->
    <div id="setup-container" class="setup-container hidden">
      <div class="setup-card">
        <div class="setup-header">
          <h1>Welcome to SHOXA! üéâ</h1>
          <p>Let's set up your business page</p>
        </div>

        <form id="setup-form" class="setup-form">
          <div class="form-group">
            <label>What type of place is this?</label>
            <select id="setup-type" required>
              <option value="">Select type...</option>
              <optgroup label="Shops">
                <option value="pharmacy">üíä Pharmacy</option>
                <option value="grocery">üõí Grocery Store</option>
                <option value="electronics">üì± Electronics</option>
                <option value="clothing">üëï Clothing</option>
                <option value="beauty">üíÑ Beauty & Cosmetics</option>
                <option value="hardware">üî® Hardware</option>
                <option value="bookstore">üìö Bookstore</option>
                <option value="shop_other">üì¶ Other Shop</option>
              </optgroup>
              <optgroup label="Food & Drink">
                <option value="restaurant">üçΩÔ∏è Restaurant</option>
                <option value="cafe">‚òï Cafe</option>
                <option value="bakery">ü•ê Bakery</option>
                <option value="fastfood">üçî Fast Food</option>
                <option value="bar">üç∫ Bar</option>
              </optgroup>
              <optgroup label="Services & Amenities">
                <option value="hospital">üè• Hospital / Clinic</option>
                <option value="bank">üè¶ Bank</option>
                <option value="salon">üíá Salon / Barber</option>
                <option value="gym">üí™ Gym / Sports</option>
                <option value="school">üè´ School / Education</option>
                <option value="hotel">üè® Hotel</option>
                <option value="repair">üîß Repair Service</option>
                <option value="service_other">üè¢ Other Service</option>
              </optgroup>
              <optgroup label="Recreation">
                <option value="park">üå≥ Park</option>
                <option value="cinema">üé¨ Cinema</option>
                <option value="museum">üèõÔ∏è Museum</option>
              </optgroup>
            </select>
          </div>

          <div class="form-group">
            <label>Business Name</label>
            <input type="text" id="setup-name" placeholder="Your business name" required>
          </div>

          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="setup-phone" placeholder="+998 90 123 4567">
          </div>

          <button type="submit" class="btn btn-primary btn-full">
            <span>Continue</span>
            <i class="ri-arrow-right-line"></i>
          </button>
        </form>
      </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard-container" class="dashboard-container hidden">
      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <img src="logo.png" alt="SHOXA" class="logo-icon">
          <span class="logo-text">SHOXA</span>
        </div>
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active" data-page="home">
            <i class="ri-home-4-line"></i>
            <span>Home</span>
          </a>
          <a href="#" class="nav-item" data-page="page">
            <i class="ri-store-2-line"></i>
            <span>My Page</span>
          </a>
          <a href="#" class="nav-item" data-page="products">
            <i class="ri-shopping-bag-line"></i>
            <span>Products</span>
          </a>
          <a href="#" class="nav-item" data-page="posts">
            <i class="ri-image-line"></i>
            <span>Posts</span>
          </a>
          <a href="#" class="nav-item" data-page="messages">
            <i class="ri-message-3-line"></i>
            <span>Messages</span>
            <span class="nav-badge" id="messages-badge">0</span>
          </a>
          <a href="#" class="nav-item" data-page="stats">
            <i class="ri-bar-chart-box-line"></i>
            <span>Statistics</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <a href="#" class="nav-item" data-page="settings">
            <i class="ri-settings-3-line"></i>
            <span>Settings</span>
          </a>
          <button id="logout-btn" class="btn btn-ghost btn-full">
            <i class="ri-logout-box-line"></i>
            <span>Logout</span>
          </button>
        </div>
      </aside>

      <!-- Mobile Header -->
      <header class="mobile-header">
        <button id="menu-toggle" class="menu-toggle">
          <i class="ri-menu-line"></i>
        </button>
        <span class="logo-text">SHOXA</span>
        <button id="mobile-notifications" class="btn-icon">
          <i class="ri-notification-3-line"></i>
        </button>
      </header>

      <!-- Main Content -->
      <main class="main-content">

        <!-- HOME PAGE -->
        <div id="page-home" class="page active">
          <div class="page-header">
            <div>
              <h1 id="greeting">Welcome!</h1>
              <p class="shop-name" id="home-shop-name">Your Business</p>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="quick-stats-grid">
            <div class="quick-stat">
              <div class="stat-icon views"><i class="ri-eye-line"></i></div>
              <div class="stat-info">
                <span class="stat-value" id="home-views">0</span>
                <span class="stat-label">Page Views</span>
              </div>
            </div>
            <div class="quick-stat">
              <div class="stat-icon followers"><i class="ri-user-heart-line"></i></div>
              <div class="stat-info">
                <span class="stat-value" id="home-followers">0</span>
                <span class="stat-label">Followers</span>
              </div>
            </div>
            <div class="quick-stat">
              <div class="stat-icon products"><i class="ri-shopping-bag-line"></i></div>
              <div class="stat-info">
                <span class="stat-value" id="home-products">0</span>
                <span class="stat-label">Products</span>
              </div>
            </div>
            <div class="quick-stat">
              <div class="stat-icon messages"><i class="ri-message-3-line"></i></div>
              <div class="stat-info">
                <span class="stat-value" id="home-messages">0</span>
                <span class="stat-label">Messages</span>
              </div>
            </div>
          </div>

          <!-- Recent Messages -->
          <div class="card">
            <div class="card-header">
              <h3><i class="ri-message-3-line"></i> Recent Messages</h3>
              <a href="#" onclick="navigateTo('messages'); return false;" class="view-all">View All</a>
            </div>
            <div id="recent-messages" class="messages-preview">
              <div class="empty-state small">
                <i class="ri-chat-1-line"></i>
                <p>No messages yet</p>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
            <button class="quick-action-btn" onclick="navigateTo('posts'); openPostModal();">
              <i class="ri-add-circle-line"></i>
              Create Post
            </button>
            <button class="quick-action-btn" onclick="navigateTo('products'); openProductModal();">
              <i class="ri-shopping-bag-line"></i>
              Add Product
            </button>
            <button class="quick-action-btn" onclick="navigateTo('page');">
              <i class="ri-edit-line"></i>
              Edit Page
            </button>
          </div>
        </div>

        <!-- MY PAGE -->
        <div id="page-page" class="page">
          <div class="page-header">
            <h1>My Page</h1>
            <button class="btn btn-primary" onclick="savePage()">
              <i class="ri-save-line"></i> Save Changes
            </button>
          </div>

          <div class="page-editor-grid">
            <!-- Basic Info -->
            <div class="card">
              <h3>Basic Information</h3>
              <div class="form-group">
                <label>Business Name</label>
                <input type="text" id="page-name" placeholder="Your business name">
              </div>
              <div class="form-group">
                <label>Type</label>
                <select id="page-type">
                  <option value="">Select type...</option>
                  <optgroup label="Shops">
                    <option value="pharmacy">üíä Pharmacy</option>
                    <option value="grocery">üõí Grocery Store</option>
                    <option value="electronics">üì± Electronics</option>
                    <option value="clothing">üëï Clothing</option>
                    <option value="beauty">üíÑ Beauty & Cosmetics</option>
                    <option value="hardware">üî® Hardware</option>
                    <option value="bookstore">üìö Bookstore</option>
                    <option value="shop_other">üì¶ Other Shop</option>
                  </optgroup>
                  <optgroup label="Food & Drink">
                    <option value="restaurant">üçΩÔ∏è Restaurant</option>
                    <option value="cafe">‚òï Cafe</option>
                    <option value="bakery">ü•ê Bakery</option>
                    <option value="fastfood">üçî Fast Food</option>
                    <option value="bar">üç∫ Bar</option>
                  </optgroup>
                  <optgroup label="Services & Amenities">
                    <option value="hospital">üè• Hospital / Clinic</option>
                    <option value="bank">üè¶ Bank</option>
                    <option value="salon">üíá Salon / Barber</option>
                    <option value="gym">üí™ Gym / Sports</option>
                    <option value="school">üè´ School / Education</option>
                    <option value="hotel">üè® Hotel</option>
                    <option value="repair">üîß Repair Service</option>
                    <option value="service_other">üè¢ Other Service</option>
                  </optgroup>
                  <optgroup label="Recreation">
                    <option value="park">üå≥ Park</option>
                    <option value="cinema">üé¨ Cinema</option>
                    <option value="museum">üèõÔ∏è Museum</option>
                  </optgroup>
                </select>
              </div>
              <div class="form-group">
                <label>Phone</label>
                <input type="tel" id="page-phone" placeholder="+998 90 123 4567">
              </div>
              <div class="form-group">
                <label>About Us</label>
                <textarea id="page-description" rows="3" placeholder="Tell customers about your business..."></textarea>
              </div>
            </div>

            <!-- Contact Methods -->
            <div class="card">
              <h3><i class="ri-links-line"></i> Contact Methods</h3>
              <p class="form-hint" style="margin-bottom: 16px;">Add ways customers can reach you</p>

              <div id="contact-methods-list" class="contact-methods-list">
                <!-- Contact methods will be added dynamically -->
              </div>

              <div class="add-contact-row">
                <select id="contact-type-select">
                  <option value="">Add contact method...</option>
                  <option value="phone">üìû Phone</option>
                  <option value="whatsapp">üí¨ WhatsApp</option>
                  <option value="telegram">‚úàÔ∏è Telegram</option>
                  <option value="instagram">üì∑ Instagram</option>
                  <option value="facebook">üìò Facebook</option>
                  <option value="tiktok">üéµ TikTok</option>
                  <option value="website">üåê Website</option>
                  <option value="email">üìß Email</option>
                  <option value="other">üîó Other</option>
                </select>
              </div>
            </div>

            <!-- Images -->
            <div class="card">
              <h3>Images</h3>
              <div class="images-upload-grid">
                <div class="image-upload-box" id="logo-upload">
                  <input type="file" id="logo-input" accept="image/*" hidden>
                  <div class="upload-placeholder" onclick="document.getElementById('logo-input').click()">
                    <i class="ri-image-add-line"></i>
                    <span>Logo</span>
                  </div>
                  <img id="logo-preview" class="upload-preview hidden" alt="Logo">
                </div>
                <div class="image-upload-box banner" id="banner-upload">
                  <input type="file" id="banner-input" accept="image/*" hidden>
                  <div class="upload-placeholder" onclick="document.getElementById('banner-input').click()">
                    <i class="ri-image-add-line"></i>
                    <span>Banner Image</span>
                  </div>
                  <img id="banner-preview" class="upload-preview hidden" alt="Banner">
                </div>
              </div>
            </div>

            <!-- Amenities & Services -->
            <div class="card">
              <h3><i class="ri-service-line"></i> Amenities & Services</h3>
              <div class="amenities-grid">
                <label class="amenity-toggle">
                  <input type="checkbox" id="page-wifi">
                  <span><i class="ri-wifi-line"></i> Free WiFi</span>
                </label>
                <label class="amenity-toggle">
                  <input type="checkbox" id="page-parking">
                  <span><i class="ri-parking-line"></i> Parking</span>
                </label>
                <label class="amenity-toggle">
                  <input type="checkbox" id="page-delivery">
                  <span><i class="ri-truck-line"></i> Delivery</span>
                </label>
                <label class="amenity-toggle">
                  <input type="checkbox" id="page-takeaway">
                  <span><i class="ri-shopping-bag-3-line"></i> Takeaway</span>
                </label>
              </div>
              <div class="form-group" style="margin-top: 16px;">
                <label>Payment Methods</label>
                <div class="payment-methods">
                  <label class="payment-toggle">
                    <input type="checkbox" id="page-pay-cash" checked>
                    <span>üíµ Cash</span>
                  </label>
                  <label class="payment-toggle">
                    <input type="checkbox" id="page-pay-uzcard">
                    <span>üí≥ Uzcard</span>
                  </label>
                  <label class="payment-toggle">
                    <input type="checkbox" id="page-pay-humo">
                    <span>üí≥ Humo</span>
                  </label>
                  <label class="payment-toggle">
                    <input type="checkbox" id="page-pay-visa">
                    <span>üí≥ Visa/MC</span>
                  </label>
                  <label class="payment-toggle">
                    <input type="checkbox" id="page-pay-other">
                    <span>üîó Other</span>
                  </label>
                </div>
                <div id="other-payment-field" class="other-field hidden" style="margin-top: 8px;">
                  <input type="text" id="page-pay-other-name" placeholder="Other payment method name">
                </div>
              </div>
              <div class="form-group">
                <label>Languages Spoken</label>
                <div class="language-toggles">
                  <label class="lang-toggle">
                    <input type="checkbox" id="page-lang-uz" checked>
                    <span>üá∫üáø O'zbek</span>
                  </label>
                  <label class="lang-toggle">
                    <input type="checkbox" id="page-lang-ru">
                    <span>üá∑üá∫ –†—É—Å—Å–∫–∏–π</span>
                  </label>
                  <label class="lang-toggle">
                    <input type="checkbox" id="page-lang-en">
                    <span>üá¨üáß English</span>
                  </label>
                  <label class="lang-toggle">
                    <input type="checkbox" id="page-lang-other">
                    <span>üåç Other</span>
                  </label>
                </div>
                <div id="other-language-field" class="other-field hidden" style="margin-top: 8px;">
                  <input type="text" id="page-lang-other-name" placeholder="Other language name">
                </div>
              </div>
            </div>

            <!-- Location -->
            <div class="card full-width">
              <h3>Location</h3>
              <div class="form-group">
                <label>Address</label>
                <input type="text" id="page-address" placeholder="Street address">
              </div>
              <div class="map-controls">
                <button type="button" class="btn btn-ghost" onclick="useCurrentLocation()">
                  <i class="ri-focus-3-line"></i> Use My Location
                </button>
              </div>
              <div id="location-map" class="map-container"></div>
              <p class="form-hint">Click on the map or use the button above to set your location</p>
            </div>

            <!-- Opening Hours -->
            <div class="card full-width">
              <h3><i class="ri-time-line"></i> Opening Hours</h3>

              <!-- Step 1: Schedule Type -->
              <div class="hours-wizard">
                <div class="form-group">
                  <label>Schedule Type</label>
                  <div class="schedule-type-btns" id="schedule-type-btns">
                    <button type="button" class="schedule-type-btn active" data-type="standard">
                      <i class="ri-building-line"></i>
                      <span>Standard</span>
                      <small>Mon-Fri, Sat-Sun off</small>
                    </button>
                    <button type="button" class="schedule-type-btn" data-type="everyday">
                      <i class="ri-calendar-line"></i>
                      <span>Every Day</span>
                      <small>Same hours daily</small>
                    </button>
                    <button type="button" class="schedule-type-btn" data-type="custom">
                      <i class="ri-settings-3-line"></i>
                      <span>Custom</span>
                      <small>Set each day</small>
                    </button>
                  </div>
                </div>

                <!-- Step 2: Default Hours -->
                <div class="form-row" id="default-hours-row">
                  <div class="form-group">
                    <label>Opens at</label>
                    <input type="time" id="hours-default-open" value="09:00">
                  </div>
                  <div class="form-group">
                    <label>Closes at</label>
                    <input type="time" id="hours-default-close" value="18:00">
                  </div>
                </div>

                <!-- Break Time Toggle -->
                <div class="form-group">
                  <label class="toggle-row">
                    <input type="checkbox" id="hours-has-break">
                    <span>Add lunch/break time</span>
                  </label>
                </div>

                <!-- Break Times (hidden by default) -->
                <div class="form-row hidden" id="break-times-row">
                  <div class="form-group">
                    <label>Break starts</label>
                    <input type="time" id="hours-break-start" value="13:00">
                  </div>
                  <div class="form-group">
                    <label>Break ends</label>
                    <input type="time" id="hours-break-end" value="14:00">
                  </div>
                </div>

                <!-- Custom Days Editor (hidden by default) -->
                <div class="hours-custom-editor hidden" id="hours-custom-editor">
                  <!-- Generated by JS -->
                </div>

                <!-- Preview Grid -->
                <div class="hours-preview" id="hours-preview">
                  <label>Schedule Preview</label>
                  <div class="hours-grid" id="hours-grid">
                    <!-- Generated by JS -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PRODUCTS PAGE -->
        <div id="page-products" class="page">
          <div class="page-header">
            <h1>Products</h1>
            <div class="header-actions">
              <button class="btn btn-ghost" onclick="importProducts()">
                <i class="ri-upload-cloud-line"></i> Import
              </button>
              <button class="btn btn-primary" onclick="openProductModal()">
                <i class="ri-add-line"></i> Add Product
              </button>
            </div>
          </div>

          <div class="products-toolbar">
            <input type="text" id="product-search" placeholder="Search products..." class="search-input"
              oninput="filterProducts()">
            <select id="product-category-filter" onchange="filterProducts()">
              <option value="">All Categories</option>
            </select>
          </div>

          <div id="products-grid" class="products-grid">
            <div class="empty-state">
              <i class="ri-shopping-bag-line"></i>
              <h3>No products yet</h3>
              <p>Add your products so customers can see what you offer</p>
              <button class="btn btn-primary" onclick="openProductModal()">Add Your First Product</button>
            </div>
          </div>
        </div>

        <!-- POSTS PAGE -->
        <div id="page-posts" class="page">
          <div class="page-header">
            <h1>Posts</h1>
            <button class="btn btn-primary" onclick="openPostModal()">
              <i class="ri-add-line"></i> Create Post
            </button>
          </div>

          <div class="posts-tabs">
            <button class="tab-btn active" data-tab="all">All Posts</button>
            <button class="tab-btn" data-tab="stories">Stories</button>
          </div>

          <div id="posts-grid" class="posts-grid">
            <div class="empty-state">
              <i class="ri-image-line"></i>
              <h3>No posts yet</h3>
              <p>Share updates, promotions, and news with your customers</p>
              <button class="btn btn-primary" onclick="openPostModal()">Create Your First Post</button>
            </div>
          </div>
        </div>

        <!-- MESSAGES PAGE -->
        <div id="page-messages" class="page">
          <div class="page-header">
            <h1>Messages</h1>
          </div>

          <div class="messages-container">
            <div class="messages-list" id="messages-list">
              <div class="empty-state">
                <i class="ri-message-3-line"></i>
                <h3>No messages yet</h3>
                <p>When customers contact you, their messages will appear here</p>
              </div>
            </div>

            <div class="message-detail hidden" id="message-detail">
              <div class="message-detail-header">
                <button class="btn-icon" onclick="closeMessageDetail()">
                  <i class="ri-arrow-left-line"></i>
                </button>
                <div class="customer-info">
                  <span class="customer-name">Customer Name</span>
                  <span class="customer-phone">+998 90 123 4567</span>
                </div>
              </div>
              <div class="message-thread" id="message-thread"></div>
              <div class="message-input-area">
                <input type="text" id="reply-input" placeholder="Type your reply...">
                <button class="btn btn-primary" onclick="sendReply()">
                  <i class="ri-send-plane-fill"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- STATISTICS PAGE -->
        <div id="page-stats" class="page">
          <div class="page-header">
            <h1>Statistics</h1>
            <select id="stats-period" onchange="loadStats()">
              <option value="7">Last 7 Days</option>
              <option value="30" selected>Last 30 Days</option>
              <option value="90">Last 90 Days</option>
            </select>
          </div>

          <!-- Key Metrics -->
          <div class="stats-kpi-grid">
            <div class="stats-kpi">
              <div class="kpi-icon"><i class="ri-eye-line"></i></div>
              <div class="kpi-data">
                <span class="kpi-value" id="stat-total-views">0</span>
                <span class="kpi-label">Total Views</span>
                <span class="kpi-change positive" id="stat-views-change">+0%</span>
              </div>
            </div>
            <div class="stats-kpi">
              <div class="kpi-icon"><i class="ri-map-pin-line"></i></div>
              <div class="kpi-data">
                <span class="kpi-value" id="stat-map-views">0</span>
                <span class="kpi-label">Views from Map</span>
                <span class="kpi-change positive">+0%</span>
              </div>
            </div>
            <div class="stats-kpi">
              <div class="kpi-icon"><i class="ri-search-line"></i></div>
              <div class="kpi-data">
                <span class="kpi-value" id="stat-search-views">0</span>
                <span class="kpi-label">From Search</span>
                <span class="kpi-change positive">+0%</span>
              </div>
            </div>
            <div class="stats-kpi">
              <div class="kpi-icon"><i class="ri-timer-line"></i></div>
              <div class="kpi-data">
                <span class="kpi-value" id="stat-avg-time">0s</span>
                <span class="kpi-label">Avg. Time on Page</span>
              </div>
            </div>
          </div>

          <!-- Charts Row -->
          <div class="stats-charts-grid">
            <div class="card chart-card">
              <h3>Page Views Over Time</h3>
              <canvas id="views-chart"></canvas>
            </div>
            <div class="card chart-card">
              <h3>Traffic Sources</h3>
              <canvas id="sources-chart"></canvas>
            </div>
          </div>

          <!-- Engagement Stats -->
          <div class="stats-engagement-grid">
            <div class="card">
              <h3>Engagement</h3>
              <div class="engagement-stats">
                <div class="engagement-item">
                  <i class="ri-user-heart-line"></i>
                  <div>
                    <span class="eng-value" id="stat-new-followers">0</span>
                    <span class="eng-label">New Followers</span>
                  </div>
                </div>
                <div class="engagement-item">
                  <i class="ri-phone-line"></i>
                  <div>
                    <span class="eng-value" id="stat-phone-clicks">0</span>
                    <span class="eng-label">Phone Clicks</span>
                  </div>
                </div>
                <div class="engagement-item">
                  <i class="ri-map-pin-line"></i>
                  <div>
                    <span class="eng-value" id="stat-direction-clicks">0</span>
                    <span class="eng-label">Get Directions</span>
                  </div>
                </div>
                <div class="engagement-item">
                  <i class="ri-message-3-line"></i>
                  <div>
                    <span class="eng-value" id="stat-messages-received">0</span>
                    <span class="eng-label">Messages</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <h3>Top Products</h3>
              <div id="top-products-stats" class="top-items-list">
                <div class="empty-state small">
                  <p>No product views yet</p>
                </div>
              </div>
            </div>

            <div class="card">
              <h3>Popular Posts</h3>
              <div id="top-posts-stats" class="top-items-list">
                <div class="empty-state small">
                  <p>No post views yet</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Visitor Insights -->
          <div class="card">
            <h3>When People Visit</h3>
            <canvas id="hours-chart"></canvas>
          </div>
        </div>

        <!-- SETTINGS PAGE -->
        <div id="page-settings" class="page">
          <div class="page-header">
            <h1>Settings</h1>
          </div>

          <div class="settings-sections">
            <div class="card">
              <h3>Account</h3>
              <div class="setting-item">
                <div>
                  <span class="setting-label">Email</span>
                  <span class="setting-value" id="setting-email">user@example.com</span>
                </div>
              </div>
              <div class="setting-item">
                <span class="setting-label">Change Password</span>
                <button class="btn btn-ghost">Change</button>
              </div>
            </div>

            <div class="card">
              <h3>Notifications</h3>
              <div class="setting-item">
                <span class="setting-label">Email notifications for new messages</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-email" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="setting-item">
                <span class="setting-label">Email weekly stats report</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-stats">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="card">
              <h3>Product Import</h3>
              <p class="text-muted">Import products from external systems</p>
              <div class="import-options">
                <button class="import-btn" onclick="importCSV()">
                  <i class="ri-file-excel-2-line"></i>
                  <span>Import CSV/Excel</span>
                </button>
                <button class="import-btn disabled" disabled>
                  <i class="ri-database-2-line"></i>
                  <span>1C Integration</span>
                  <span class="coming-soon">Coming Soon</span>
                </button>
                <button class="import-btn disabled" disabled>
                  <i class="ri-restaurant-line"></i>
                  <span>iiko / R-Keeper</span>
                  <span class="coming-soon">Coming Soon</span>
                </button>
              </div>
            </div>

            <div class="card danger-zone">
              <h3>Danger Zone</h3>
              <div class="setting-item">
                <div>
                  <span class="setting-label">Delete Business</span>
                  <span class="setting-desc">Permanently delete your business from SHOXA</span>
                </div>
                <button class="btn btn-danger">Delete</button>
              </div>
            </div>
          </div>
        </div>

      </main>
    </div>

    <!-- MODALS -->

    <!-- Product Modal -->
    <div id="product-modal" class="modal hidden">
      <div class="modal-backdrop" onclick="closeProductModal()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="product-modal-title">Add Product</h2>
          <button class="btn-icon" onclick="closeProductModal()">
            <i class="ri-close-line"></i>
          </button>
        </div>
        <form id="product-form" class="modal-body">
          <input type="hidden" id="product-id">
          <div class="form-group">
            <label>Product Name *</label>
            <input type="text" id="product-name" required placeholder="e.g. Aspirin 500mg">
          </div>
          <div class="form-group">
            <label>Category</label>
            <input type="text" id="product-category" placeholder="e.g. Medicine, Electronics">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="product-description" rows="2" placeholder="Brief description..."></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Price (UZS) *</label>
              <input type="number" id="product-price" required step="100" placeholder="50000">
            </div>
            <div class="form-group">
              <label>Sale Price</label>
              <input type="number" id="product-sale-price" step="100" placeholder="Optional">
            </div>
          </div>
          <div class="form-group">
            <label>Image</label>
            <div class="product-image-upload">
              <input type="file" id="product-image" accept="image/*" hidden>
              <div class="upload-area" onclick="document.getElementById('product-image').click()">
                <i class="ri-image-add-line"></i>
                <span>Upload Image</span>
              </div>
              <img id="product-image-preview" class="hidden" alt="Preview">
            </div>
          </div>
        </form>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closeProductModal()">Cancel</button>
          <button class="btn btn-primary" onclick="saveProduct()">Save Product</button>
        </div>
      </div>
    </div>

    <!-- Post Modal -->
    <div id="post-modal" class="modal hidden">
      <div class="modal-backdrop" onclick="closePostModal()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Post</h2>
          <button class="btn-icon" onclick="closePostModal()">
            <i class="ri-close-line"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>What's new?</label>
            <textarea id="post-content" rows="4" placeholder="Share an update, promotion, or news..."></textarea>
          </div>
          <div class="form-group">
            <label>Add Image</label>
            <div class="post-image-upload">
              <input type="file" id="post-image" accept="image/*" hidden>
              <div class="upload-area" onclick="document.getElementById('post-image').click()">
                <i class="ri-image-add-line"></i>
                <span>Upload Image</span>
              </div>
            </div>
            <div id="post-image-preview" class="image-preview-container"></div>
          </div>
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="post-is-story">
              <span>Post as Story (expires in 24 hours)</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closePostModal()">Cancel</button>
          <button class="btn btn-primary" onclick="savePost()">Publish</button>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden">
      <span id="toast-message"></span>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading-overlay hidden">
      <div class="spinner"></div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>


  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Telegram Upload -->
  <script src="js/telegram.js"></script>

  <!-- App -->
  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
</body>

</html>