<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHOXA Admin</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css">
</head>

<body>
  <div id="app">
    <!-- Auth Pages -->
    <div id="auth-container" class="auth-container">
      <!-- Login Form -->
      <div id="login-page" class="auth-page">
        <div class="auth-card">
          <div class="auth-logo">
            <img src="logo.png" alt="SHOXA" class="logo-icon">
            <h1>SHOXA</h1>
            <p>Shop Owner Portal</p>
          </div>
          <form id="login-form" class="auth-form">
            <div class="form-group">
              <label for="login-email">Email</label>
              <input type="email" id="login-email" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
              <label for="login-password">Password</label>
              <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
            </div>
            <button type="submit" class="btn btn-primary btn-full">
              <span>Sign In</span>
              <i class="ri-arrow-right-line"></i>
            </button>
          </form>
          <p class="auth-switch">
            Don't have an account? <a href="#" id="show-register">Sign Up</a>
          </p>
        </div>
      </div>

      <!-- Register Form -->
      <div id="register-page" class="auth-page hidden">
        <div class="auth-card">
          <div class="auth-logo">
            <img src="logo.png" alt="SHOXA" class="logo-icon">
            <h1>Join SHOXA</h1>
            <p>Register your business</p>
          </div>
          <form id="register-form" class="auth-form">
            <div class="form-group">
              <label for="register-name">Your Name</label>
              <input type="text" id="register-name" placeholder="John Doe" required>
            </div>
            <div class="form-group">
              <label for="register-email">Email</label>
              <input type="email" id="register-email" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
              <label for="register-password">Password</label>
              <input type="password" id="register-password" placeholder="Min 6 characters" required>
            </div>
            <div class="form-group">
              <label for="shop-type">Business Type</label>
              <select id="shop-type" required>
                <option value="">Select type...</option>
                <option value="restaurant">üçΩÔ∏è Restaurant</option>
                <option value="pharmacy">üíä Pharmacy</option>
                <option value="grocery">üõí Grocery Store</option>
                <option value="hospital">üè• Hospital/Clinic</option>
                <option value="cafe">‚òï Cafe</option>
                <option value="bakery">ü•ê Bakery</option>
                <option value="other">üì¶ Other</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary btn-full">
              <span>Create Account</span>
              <i class="ri-arrow-right-line"></i>
            </button>
          </form>
          <p class="auth-switch">
            Already have an account? <a href="#" id="show-login">Sign In</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard-container" class="dashboard-container hidden">
      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <img src="logo.png" alt="SHOXA" class="logo-icon">
          <span class="logo-text">SHOXA</span>
        </div>
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active" data-page="dashboard">
            <i class="ri-dashboard-3-line"></i>
            <span>Dashboard</span>
          </a>
          <a href="#" class="nav-item" data-page="shop">
            <i class="ri-store-2-line"></i>
            <span>Shop Settings</span>
          </a>
          <a href="#" class="nav-item" data-page="products">
            <i class="ri-shopping-bag-line"></i>
            <span>Products</span>
          </a>
          <a href="#" class="nav-item" data-page="posts">
            <i class="ri-image-line"></i>
            <span>Posts</span>
          </a>
          <a href="#" class="nav-item" data-page="analytics">
            <i class="ri-bar-chart-box-line"></i>
            <span>Analytics</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <button id="logout-btn" class="btn btn-ghost btn-full">
            <i class="ri-logout-box-line"></i>
            <span>Logout</span>
          </button>
        </div>
      </aside>

      <!-- Mobile Header -->
      <header class="mobile-header">
        <button id="menu-toggle" class="menu-toggle">
          <i class="ri-menu-line"></i>
        </button>
        <span class="logo-text">SHOXA</span>
        <div class="header-actions">
          <button id="mobile-logout" class="btn-icon">
            <i class="ri-logout-box-line"></i>
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Dashboard Page -->
        <div id="page-dashboard" class="page active">
          <div class="page-header">
            <h1>Dashboard</h1>
            <p class="greeting" id="greeting">Good morning!</p>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon" style="background: #E3F2FD;">
                <i class="ri-eye-line" style="color: #1976D2;"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-views">0</span>
                <span class="stat-label">Total Views</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #E8F5E9;">
                <i class="ri-user-heart-line" style="color: #388E3C;"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-followers">0</span>
                <span class="stat-label">Followers</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #FFF3E0;">
                <i class="ri-shopping-bag-line" style="color: #F57C00;"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-products">0</span>
                <span class="stat-label">Products</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #FCE4EC;">
                <i class="ri-image-line" style="color: #C2185B;"></i>
              </div>
              <div class="stat-info">
                <span class="stat-value" id="stat-posts">0</span>
                <span class="stat-label">Posts</span>
              </div>
            </div>
          </div>
          <div class="dashboard-grid">
            <div class="card quick-actions">
              <h3>Quick Actions</h3>
              <div class="action-buttons">
                <button class="action-btn" onclick="navigateTo('products')">
                  <i class="ri-add-line"></i>
                  Add Product
                </button>
                <button class="action-btn" onclick="navigateTo('posts')">
                  <i class="ri-camera-line"></i>
                  Create Post
                </button>
                <button class="action-btn" onclick="navigateTo('shop')">
                  <i class="ri-settings-3-line"></i>
                  Edit Shop
                </button>
              </div>
            </div>
            <div class="card shop-preview">
              <h3>Your Shop</h3>
              <div id="shop-preview-content">
                <p class="empty-state">Complete your shop setup to see preview</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Shop Settings Page -->
        <div id="page-shop" class="page">
          <div class="page-header">
            <h1>Shop Settings</h1>
            <button id="save-shop-btn" class="btn btn-primary">
              <i class="ri-save-line"></i>
              Save Changes
            </button>
          </div>
          <div class="settings-grid">
            <div class="card">
              <h3>Basic Information</h3>
              <div class="form-group">
                <label for="shop-name">Shop Name</label>
                <input type="text" id="shop-name" placeholder="My Awesome Shop">
              </div>
              <div class="form-group">
                <label for="shop-description">Description</label>
                <textarea id="shop-description" rows="3" placeholder="Tell customers about your shop..."></textarea>
              </div>
              <div class="form-group">
                <label for="shop-about">About</label>
                <textarea id="shop-about" rows="4"
                  placeholder="Your story, history, what makes you special..."></textarea>
              </div>
            </div>
            <div class="card">
              <h3>Shop Images</h3>
              <div class="image-upload-group">
                <div class="image-upload" id="logo-upload">
                  <input type="file" id="logo-input" accept="image/*" hidden>
                  <div class="upload-placeholder" onclick="document.getElementById('logo-input').click()">
                    <i class="ri-image-add-line"></i>
                    <span>Upload Logo</span>
                  </div>
                  <img id="logo-preview" class="upload-preview hidden" alt="Logo">
                </div>
                <div class="image-upload banner" id="banner-upload">
                  <input type="file" id="banner-input" accept="image/*" hidden>
                  <div class="upload-placeholder" onclick="document.getElementById('banner-input').click()">
                    <i class="ri-image-add-line"></i>
                    <span>Upload Banner</span>
                  </div>
                  <img id="banner-preview" class="upload-preview hidden" alt="Banner">
                </div>
              </div>
            </div>
            <div class="card full-width">
              <h3>Location</h3>
              <div class="form-group">
                <label for="shop-address">Address</label>
                <input type="text" id="shop-address" placeholder="Search or click on map...">
              </div>
              <div id="location-map" class="map-container"></div>
              <input type="hidden" id="shop-lat">
              <input type="hidden" id="shop-lng">
            </div>
            <div class="card full-width">
              <h3>Opening Hours</h3>
              <div class="hours-grid" id="hours-grid">
                <!-- Generated by JS -->
              </div>
            </div>
          </div>
        </div>

        <!-- Products Page -->
        <div id="page-products" class="page">
          <div class="page-header">
            <h1>Products</h1>
            <button id="add-product-btn" class="btn btn-primary">
              <i class="ri-add-line"></i>
              Add Product
            </button>
          </div>
          <div class="products-toolbar">
            <input type="text" id="product-search" placeholder="Search products..." class="search-input">
            <select id="product-filter">
              <option value="">All Categories</option>
            </select>
          </div>
          <div id="products-grid" class="products-grid">
            <div class="empty-state">
              <i class="ri-shopping-bag-line"></i>
              <p>No products yet</p>
              <button class="btn btn-primary" onclick="openProductModal()">Add Your First Product</button>
            </div>
          </div>
        </div>

        <!-- Posts Page -->
        <div id="page-posts" class="page">
          <div class="page-header">
            <h1>Posts & Stories</h1>
            <button id="add-post-btn" class="btn btn-primary">
              <i class="ri-add-line"></i>
              Create Post
            </button>
          </div>
          <div id="posts-grid" class="posts-grid">
            <div class="empty-state">
              <i class="ri-image-line"></i>
              <p>No posts yet</p>
              <button class="btn btn-primary" onclick="openPostModal()">Create Your First Post</button>
            </div>
          </div>
        </div>

        <!-- Analytics Page -->
        <div id="page-analytics" class="page">
          <div class="page-header">
            <h1>Analytics</h1>
          </div>
          <div class="analytics-grid">
            <div class="card">
              <h3>Views Over Time</h3>
              <canvas id="views-chart"></canvas>
            </div>
            <div class="card">
              <h3>Top Products</h3>
              <div id="top-products-list" class="top-list">
                <p class="empty-state">No data yet</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Product Modal -->
    <div id="product-modal" class="modal hidden">
      <div class="modal-backdrop" onclick="closeProductModal()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="product-modal-title">Add Product</h2>
          <button class="btn-icon" onclick="closeProductModal()">
            <i class="ri-close-line"></i>
          </button>
        </div>
        <form id="product-form" class="modal-body">
          <input type="hidden" id="product-id">
          <div class="form-group">
            <label for="product-name">Product Name</label>
            <input type="text" id="product-name" required>
          </div>
          <div class="form-group">
            <label for="product-description">Description</label>
            <textarea id="product-description" rows="2"></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="product-price">Price</label>
              <input type="number" id="product-price" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="product-discount">Discount Price</label>
              <input type="number" id="product-discount" step="0.01">
            </div>
          </div>
          <div class="form-group">
            <label for="product-category">Category</label>
            <input type="text" id="product-category" placeholder="e.g. Drinks, Main Course">
          </div>
          <div class="form-group">
            <label>Product Image</label>
            <div class="image-upload product-image-upload">
              <input type="file" id="product-image-input" accept="image/*" hidden>
              <div class="upload-placeholder" onclick="document.getElementById('product-image-input').click()">
                <i class="ri-image-add-line"></i>
                <span>Upload Image</span>
              </div>
              <img id="product-image-preview" class="upload-preview hidden" alt="Product">
            </div>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="product-in-stock" checked>
              In Stock
            </label>
          </div>
        </form>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closeProductModal()">Cancel</button>
          <button class="btn btn-primary" onclick="saveProduct()">Save Product</button>
        </div>
      </div>
    </div>

    <!-- Post Modal -->
    <div id="post-modal" class="modal hidden">
      <div class="modal-backdrop" onclick="closePostModal()"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Post</h2>
          <button class="btn-icon" onclick="closePostModal()">
            <i class="ri-close-line"></i>
          </button>
        </div>
        <form id="post-form" class="modal-body">
          <div class="form-group">
            <label for="post-content">What's new?</label>
            <textarea id="post-content" rows="4" placeholder="Share updates, news, or special offers..."></textarea>
          </div>
          <div class="form-group">
            <label>Add Images</label>
            <div class="image-upload post-image-upload">
              <input type="file" id="post-image-input" accept="image/*" multiple hidden>
              <div class="upload-placeholder" onclick="document.getElementById('post-image-input').click()">
                <i class="ri-image-add-line"></i>
                <span>Add Images</span>
              </div>
            </div>
            <div id="post-images-preview" class="images-preview"></div>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="post-is-story">
              Post as Story (expires in 24h)
            </label>
          </div>
        </form>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closePostModal()">Cancel</button>
          <button class="btn btn-primary" onclick="savePost()">Publish</button>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden">
      <span id="toast-message"></span>
    </div>

    <!-- Loading Overlay -->
    <div id="loading" class="loading-overlay hidden">
      <div class="spinner"></div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- App Scripts -->
  <script src="js/config.js"></script>
  <script src="js/telegram.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/shop.js"></script>
  <script src="js/products.js"></script>
  <script src="js/posts.js"></script>
  <script src="js/app.js"></script>
</body>

</html>